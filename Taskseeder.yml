version: '3'

tasks:
  create-db-up:
    desc: Create database
    cmds:
      - python warehouse_management/seeders/seed_create_database.py --up
  create-db-down:
    desc: Remove database
    cmds:
      - python warehouse_management/seeders/seed_create_database.py --down

  db-migration-up:
    desc: Create all tables using python seeders (migrate)
    cmds:
      - python warehouse_management/seeders/seed_db_migration.py --up
  db-migration-down:
    desc: Remove all tables of db using python seeders
    cmds:
      - python warehouse_management/seeders/seed_db_migration.py --down

  db-migration-alembic-up:
    desc: Migration upgrade using alembic (+1 step from head)
    cmds:
      - alembic upgrade +1
  db-migration-alembic-down:
    desc: Migration downgrade using alembic (-1 step from head)
    cmds:
      - alembic downgrade -1

  permissions-up:
    desc: Insert initial Data permissions to the 'permissions' table of DB
    cmds:
      - python warehouse_management/seeders/seed_permissions.py --up
  permissions-down:
    desc: Truncate the 'permissions' table of DB
    cmds:
      - python warehouse_management/seeders/seed_permissions.py --down

  default-roles-up:
    desc: Seed the 'admin', 'client' roles and assign permissions
    deps: [ permissions-up ]
    cmds:
      - python warehouse_management/seeders/seed_default_roles.py --up
  default-roles-down:
    desc: Delete 'admin', 'client' roles and their permissions
    cmds:
      - python warehouse_management/seeders/seed_default_roles.py --down

  default-users-up:
    desc: Seed the default 'admin' user (username=admin, password=admin123)(client user for testing purposes)
    deps: [ default-roles-up ]
    cmds:
      - python warehouse_management/seeders/seed_default_users.py --up
  default-users-down:
    desc: Delete 'admin' user(client user for testing purposes)
    cmds:
      - python warehouse_management/seeders/seed_default_users.py --down
